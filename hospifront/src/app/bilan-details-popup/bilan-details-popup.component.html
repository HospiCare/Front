<div class="popup-overlay" [class.visible]="isVisible">
  <div class="popup-container">
    <div class="popup-content">
      <h2 class="popup-title">
        {{ bilanType === 'biologique' ? 'Bilan Biologique' : 'Bilan Radiologique' }}:
      </h2>

      @if (bilanType === 'biologique') {
        <div class="bilan-content">
          <h3>{{bilanData?.type}}:</h3>
          <div class="analysis-table">
            <div class="table-header">
              <div class="header-cell">Bilan</div>
              <div class="header-cell">RÃ©sultat</div>
            </div>
            <div class="table-content">
              @for (test of testResults; let i = $index; track i) {
                <div class="table-row">
                  <div class="cell">Test {{i + 1}}</div>
                  <div class="cell">{{test}}</div>
                </div>
              }
            </div>
          </div>

          <!-- Reserved space for graph -->
          <div class="graph-container">
            <img [src]="bilanData?.img" alt="Graph placeholder" class="graph-image">
          </div>
        </div>
      }

      @if (bilanType === 'radiologique') {
        <div class="bilan-content">
          <h3>Radio: {{bilanData?.type}}</h3>
          <div class="image-container">
            <img src="./assets/avatar.jpg" alt="Radiological scan" class="scan-image">
          </div>
          <div class="report-text">
            {{this.CompteRendu}}
          </div>
        </div>
      }

      <div class="popup-footer">
        <button class="cancel-button" (click)="onClose()">Annuler</button>
      </div>
    </div>
  </div>
</div>
